<?php

return <<<'VALUE'
"namespace IPS\\Theme;\nclass class_core_front_streams extends \\IPS\\Theme\\Template\n{\n\t\t\tfunction extraItem( $time, $image, $html, $view = 'expanded' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<li class='ipsStreamItem ipsStreamItem_\nCONTENT;\n$return .= htmlspecialchars( $view, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n ipsStreamItem_actionBlock ipsAreaBackground_reset ipsPad' data-role=\"activityItem\" data-timestamp='\nCONTENT;\n$return .= htmlspecialchars( $time->getTimestamp(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t<div class='ipsStreamItem_container'>\n\t\t<div class='ipsStreamItem_action ipsType_blendLinks ipsType_light'>\n\t\t\t\nCONTENT;\n\nif ( isset( $image ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t{$image}\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t{$html} <span class='ipsType_light'>\nCONTENT;\n\n$val = ( $time instanceof \\IPS\\DateTime ) ? $time : \\IPS\\DateTime::ts( $time );$return .= $val->html();\n$return .= <<<CONTENT\n<\/span>\n\t\t<\/div>\n\t<\/div>\n<\/li>\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction filterCreateForm( $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $class='', $attributes=array(), $sidebar, $form=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='ipsAreaBackground ipsPad' data-controller='core.front.streams.form' data-formType='createStream'>\n\t<form accept-charset='utf-8' class=\"ipsForm ipsForm_vertical\" action=\"\nCONTENT;\n$return .= htmlspecialchars( $action, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" method=\"post\" \nCONTENT;\n\nif ( $uploadField ):\n$return .= <<<CONTENT\nenctype=\"multipart\/form-data\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nforeach ( $attributes as $k => $v ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n data-ipsForm>\n\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_submitted\" value=\"1\">\n\t\t\nCONTENT;\n\nforeach ( $hiddenValues as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $uploadField ):\n$return .= <<<CONTENT\n\n\t\t\t<input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $uploadField, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t<input type=\"hidden\" name=\"plupload\" value=\"\nCONTENT;\n\n$return .= htmlspecialchars( md5( uniqid() ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div class='ipsAreaBackground_reset ipsPad ipsSpacer_bottom' id='elStreamFilterForm'>\n\t\t\t<h2 class='ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'create_new_stream', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t<ul class='ipsList_inline ipsPos_right ipsResponsive_noFloat'>\n\t\t\t\t<li>\n\t\t\t\t\t<a href='#elStreamSortEdit_menu' class='ipsButton ipsButton_light ipsButton_verySmall' id='elStreamSortEdit' data-ipsMenu data-ipsMenu-selectable='radio' data-ipsMenu-appendTo='#elStreamFilterForm' data-ipsMenu-closeOnClick='false'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_sorting', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\n\t\t\t<ul class='ipsMenu ipsMenu_selectable ipsMenu_auto ipsHide' id='elStreamSortEdit_menu'>\n\t\t\t\t<li class='ipsMenu_item \nCONTENT;\n\nif ( $elements['']['stream_sort']->value == 'newest' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t<a href='#'>\n\t\t\t\t\t\t<input type=\"radio\" name=\"stream_sort\" value=\"newest\" \nCONTENT;\n\nif ( (string) $elements['']['stream_sort']->value == 'newest' ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n id=\"elRadio_stream_sort_newest\">\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_sort_newest', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t\t<li class='ipsMenu_item \nCONTENT;\n\nif ( $elements['']['stream_sort']->value == 'oldest' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t<a href='#'>\n\t\t\t\t\t\t<input type=\"radio\" name=\"stream_sort\" value=\"oldest\" \nCONTENT;\n\nif ( (string) $elements['']['stream_sort']->value == 'oldest' ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n id=\"elRadio_stream_sort_oldest\">\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_sort_oldest', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\t\t\t<hr class='ipsHr'>\n\t\t\t\nCONTENT;\n\nif ( isset( $elements['']['stream_title'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div class=\"ipsSpacer_bottom ipsAreaBackground_light ipsPad\">\n\t\t\t\t\t<input type='text' name='stream_title' value='\nCONTENT;\n$return .= htmlspecialchars( $elements['']['stream_title']->value, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsField_primary ipsField_fullWidth' placeholder='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' autofocus>\n\t\t\t\t\t\nCONTENT;\n\nif ( $elements['']['stream_title']->error ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\t<span class=\"ipsType_warning\">\nCONTENT;\n\n$val = \"{$elements['']['stream_title']->error}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"streams\", \\IPS\\Request::i()->app )->filterForm( $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $class, $attributes, $sidebar, $form );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\t<ul class=\"ipsToolList ipsToolList_horizontal ipsClearfix\">\n\t\t\t<li class='ipsPos_right'><button type='submit' class='ipsButton ipsButton_primary ipsButton_medium ipsButton_fullWidth' data-action='createStream'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_button_save', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button><\/li>\n\t\t<\/ul>\n\t<\/form>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction filterDuplicateForm( $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $class='', $attributes=array(), $sidebar, $form=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='ipsAreaBackground ipsPad' data-controller='core.front.streams.form'>\n\t<form accept-charset='utf-8' class=\"ipsForm ipsForm_vertical\" action=\"\nCONTENT;\n$return .= htmlspecialchars( $action, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" method=\"post\" \nCONTENT;\n\nif ( $uploadField ):\n$return .= <<<CONTENT\nenctype=\"multipart\/form-data\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nforeach ( $attributes as $k => $v ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n data-ipsForm id='elFilterForm'>\n\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_submitted\" value=\"1\">\n\t\t\nCONTENT;\n\nforeach ( $hiddenValues as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $uploadField ):\n$return .= <<<CONTENT\n\n\t\t\t<input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $uploadField, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t<input type=\"hidden\" name=\"plupload\" value=\"\nCONTENT;\n\n$return .= htmlspecialchars( md5( uniqid() ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div class='ipsAreaBackground_reset ipsPad ipsSpacer_bottom' id='elStreamFilterForm'>\t\t\t\n\t\t\t<h2 class='ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_edit_filters', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t<ul class='ipsList_inline ipsPos_right ipsResponsive_noFloat'>\n\t\t\t\t<li>\n\t\t\t\t\t<a href='#elStreamSortEdit_menu' class='ipsButton ipsButton_light ipsButton_verySmall' id='elStreamSortEdit' data-ipsMenu data-ipsMenu-selectable='radio' data-ipsMenu-appendTo='#elStreamFilterForm' data-ipsMenu-closeOnClick='false'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_sorting', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\n\t\t\t<ul class='ipsMenu ipsMenu_selectable ipsMenu_auto ipsHide' id='elStreamSortEdit_menu'>\n\t\t\t\t<li class='ipsMenu_item \nCONTENT;\n\nif ( $elements['']['stream_sort']->value == 'newest' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t<a href='#'>\n\t\t\t\t\t\t<input type=\"radio\" name=\"stream_sort\" value=\"newest\" \nCONTENT;\n\nif ( (string) $elements['']['stream_sort']->value == 'newest' ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n id=\"elRadio_stream_sort_newest\">\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_sort_newest', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t\t<li class='ipsMenu_item \nCONTENT;\n\nif ( $elements['']['stream_sort']->value == 'oldest' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t<a href='#'>\n\t\t\t\t\t\t<input type=\"radio\" name=\"stream_sort\" value=\"oldest\" \nCONTENT;\n\nif ( (string) $elements['']['stream_sort']->value == 'oldest' ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n id=\"elRadio_stream_sort_oldest\">\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_sort_oldest', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\t\t\t<hr class='ipsHr'>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"streams\", \\IPS\\Request::i()->app )->filterForm( $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $class, $attributes, $sidebar, $form );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\t<div id='elSaveNewStream_menu' class='ipsMenu ipsMenu_wide ipsHide ipsPad'>\n\t\t\t<ul class='ipsForm ipsForm_horizontal'>\n\t\t\t\t<li class='ipsFieldRow'>\n\t\t\t\t\t<input type='text' name='stream_title' value='' placeholder='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' class='ipsField_fullWidth ipsField_primary'>\n\t\t\t\t<\/li>\n\t\t\t\t<li class='ipsFieldRow'>\n\t\t\t\t\t<button type='submit' data-action='newStream' class='ipsButton ipsButton_primary ipsButton_medium ipsButton_fullWidth'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_new_stream', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\t<ul class=\"ipsToolList ipsToolList_horizontal ipsClearfix\">\n\t\t\t\nCONTENT;\n\nif ( isset( $hiddenValues['__custom_stream'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class='ipsPos_right'><button type='submit' class='ipsButton ipsButton_primary ipsButton_medium ipsButton_fullWidth' data-action='updateSaveStream'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_button_save_update', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button><\/li>\n\t\t\t\t<li class='ipsPos_right'><button type='submit' name='updateOnly' value='1' class='ipsButton ipsButton_veryLight ipsButton_medium ipsButton_fullWidth' data-action='updateStream'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_button_update', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button><\/li>\n\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t<li class='ipsPos_right'><button type='submit' name='updateOnly' value='1' class='ipsButton ipsButton_primary ipsButton_medium ipsButton_fullWidth' data-action='updateStream'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_button_update', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button><\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsPos_right ipsType_center'><button type='button' class='ipsButton ipsButton_link ipsButton_medium' data-action='cancelEditing'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_button_cancel', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button><\/li>\n\t\t\t<li class='ipsResponsive_showPhone ipsResponsive_block'><hr class='ipsHr'><\/li>\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id  ):\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsPos_left ipsJS_show'>\n\t\t\t\t<button type='button' class='ipsButton ipsButton_veryLight ipsButton_medium ipsButton_fullWidth' data-ipsMenu data-ipsMenu-closeOnClick='false' data-ipsMenu-appendTo='#elFilterForm' data-action='saveNewStream' id='elSaveNewStream'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_button_save', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button>\n\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t<\/form>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction filterForm( $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $class='', $attributes=array(), $sidebar, $form=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='ipsGrid ipsGrid_collapsePhone'>\n\t<div class='ipsGrid_span4'>\n\t\t<h3 class='ipsType_reset ipsType_large cStreamForm_title'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_include_comments', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t<ul class='ipsSideMenu_list ipsSideMenu_withRadios cStreamForm_list ipsType_normal ipsSpacer_top ipsSpacer_half' data-ipsSideMenu data-ipsSideMenu-type='radio' data-ipsSideMenu-responsive='false'>\n\t\t\t\nCONTENT;\n\nforeach ( $elements['']['stream_include_comments']->options['options'] as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li>\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"streams\", \"core\" )->filterFormRadio( $k, $v, 'stream_include_comments', $elements['']['stream_include_comments']->value, $elements['']['stream_include_comments']->required, $elements['']['stream_include_comments']->options['options'], $elements['']['stream_include_comments']->options['disabled'] );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t\t<hr class='ipsHr ipsSpacer_both ipsSpacer_double ipsResponsive_hidePhone'>\n\t\t<hr class='ipsHr ipsSpacer_both ipsResponsive_showPhone ipsResponsive_block'>\n\t\t\n\t\t<h3 class='ipsType_reset ipsType_large cStreamForm_title ipsSpacer_top'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_classes_type', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t<ul class='ipsSideMenu_list ipsSideMenu_withChecks cStreamForm_list ipsType_normal ipsSpacer_top ipsSpacer_half' data-ipsSideMenu data-ipsSideMenu-type='check' data-ipsSideMenu-responsive='false' data-filterType='type'>\n\t\t\t<li>\n\t\t\t\t<a href='#' class='ipsSideMenu_item \nCONTENT;\n\nif ( $elements['']['stream_classes_type']->value == 0 ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-ipsMenuValue='__all'>\n\t\t\t\t\t<input type=\"hidden\" name=\"stream_classes[__EMPTY]\" value=\"__EMPTY\">\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_all_content', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/a>\n\t\t\t\t<input type='radio' class='ipsHide' name='stream_classes_type' value='0' \nCONTENT;\n\nif ( $elements['']['stream_classes_type']->value == 0 ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t\t<input type='radio' class='ipsHide' name='stream_classes_type' value='1' \nCONTENT;\n\nif ( $elements['']['stream_classes_type']->value == 1 ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nif ( isset( $elements['']['stream_classes'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nforeach ( $elements['']['stream_classes']->options['options'] as $type => $lang ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a class='ipsSideMenu_item \nCONTENT;\n\nif ( isset( $elements['']['stream_containers_' . str_replace('_pl', '', $lang ) ] ) || isset( $elements['']['stream_classes_' . str_replace('_pl', '', $lang ) ] ) ):\n$return .= <<<CONTENT\ncStream_withOptions\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( $elements['']['stream_classes_type']->value !== 0 && in_array( $type, $elements['']['stream_classes']->value ) !== FALSE ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-ipsMenuValue='\nCONTENT;\n\n$return .= htmlspecialchars( str_replace( '_pl', '', $lang ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t<input type='checkbox' name='stream_classes[\nCONTENT;\n$return .= htmlspecialchars( $type, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n]' value='1' \nCONTENT;\n\nif ( $elements['']['stream_classes_type']->value !== 0 && in_array( $type, $elements['']['stream_classes']->value ) !== FALSE ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n> \n\t\t\t\t\t\t\t\nCONTENT;\n\n$val = \"{$lang}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $elements['']['stream_containers_' . str_replace('_pl', '', $lang ) ] ) || isset( $elements['']['stream_classes_' . str_replace('_pl', '', $lang ) ] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<a href='#' class='ipsPos_right ipsType_blendLinks ipsType_noUnderline cStreamForm_menu' data-ipsTooltip title='\nCONTENT;\n\n$sprintf = array(\\IPS\\Member::loggedIn()->language()->addToStack( $lang )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_filter_options', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' id='elMenu_\nCONTENT;\n\n$return .= htmlspecialchars( str_replace( '_pl', '', $lang ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsMenu data-ipsMenu-activeClass='cStreamForm_menuActive' data-ipsMenu-closeOnClick='false' data-ipsMenu-appendTo='#elStreamFilterForm'>\n\t\t\t\t\t\t\t\t<i class='fa fa-cog ipsType_large'><\/i>\n\t\t\t\t\t\t\t\t<i class='fa fa-caret-down'><\/i>\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t\t<hr class='ipsHr ipsSpacer_both ipsResponsive_showPhone ipsResponsive_block'>\n\t\t\nCONTENT;\n\nforeach ( $elements['']['stream_classes']->options['options'] as $type => $lang ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"streams\", \"core\" )->filterFormContentType( $elements[''], str_replace('_pl', '', $lang ), $type, ( $elements['']['stream_classes_type']->value !== 0 && $elements['']['stream_classes']->value == $type ) );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/div>\n\t<div class='ipsGrid_span8'>\n\t\t\nCONTENT;\n\nif ( isset( $elements['']['stream_tags'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t<input type=\"hidden\" name=\"stream_tags_type\" value=\"custom\">\n\t\t\t<h3 class='ipsType_reset ipsType_large cStreamForm_title ipsSpacer_bottom ipsSpacer_half'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_tags', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t<div class='ipsFieldRow_fullWidth'>\n\t\t\t\t{$elements['']['stream_tags']->html()}\n\t\t\t\t<p class='ipsType_reset ipsType_small ipsType_light'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'tags_desc', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\t\t<\/div>\n\t\t\t<hr class='ipsHr ipsSpacer_bottom ipsSpacer_double ipsResponsive_hidePhone'>\n\t\t\t<hr class='ipsHr ipsSpacer_bottom ipsResponsive_showPhone ipsResponsive_block'>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div class='ipsGrid ipsGrid_collapsePhone'>\n\t\t\t<div class='ipsGrid_span6'>\n\t\t\t\t\nCONTENT;\n\nif ( isset( $elements['']['stream_read'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<h3 class='ipsType_reset ipsType_large cStreamForm_title'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_read', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t<ul class='ipsSideMenu_list ipsSideMenu_withRadios cStreamForm_list ipsType_normal ipsSpacer_top ipsSpacer_half' data-ipsSideMenu data-ipsSideMenu-type='radio' data-ipsSideMenu-responsive='false' data-filterType='read'>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $elements['']['stream_read']->options['options'] as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"streams\", \"core\" )->filterFormRadio( $k, $v, 'stream_read', $elements['']['stream_read']->value, $elements['']['stream_read']->required, $elements['']['stream_read']->options['options'], $elements['']['stream_read']->options['disabled'] );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<hr class='ipsHr ipsSpacer_both ipsSpacer_double ipsResponsive_hidePhone'>\n\t\t\t\t<hr class='ipsHr ipsSpacer_both ipsResponsive_showPhone ipsResponsive_block'>\n\t\t\t\t\nCONTENT;\n\nif ( isset( $elements['']['stream_ownership'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<h3 class='ipsType_reset ipsType_large cStreamForm_title'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_ownership', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t<ul class='ipsSideMenu_list ipsSideMenu_withRadios cStreamForm_list ipsType_normal ipsSpacer_top ipsSpacer_half' role=\"radiogroup\" data-ipsSideMenu data-ipsSideMenu-type='radio' data-ipsSideMenu-responsive='false' data-filterType='ownership'>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $elements['']['stream_ownership']->options['options'] as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"streams\", \"core\" )->filterFormRadio( $k, $v, 'stream_ownership', $elements['']['stream_ownership']->value, $elements['']['stream_ownership']->required, $elements['']['stream_ownership']->options['options'], $elements['']['stream_ownership']->options['disabled'] );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $elements['']['stream_custom_members'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class='ipsSpacer_top ipsSpacer_half cStreamForm_authors \nCONTENT;\n\nif ( $elements['']['stream_ownership']->value !== 'custom' ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-role=\"ownershipMemberForm\">\n\t\t\t\t\t\t\t\t<h4 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_custom_members', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\t\t\t\t{$elements['']['stream_custom_members']->html()}\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<hr class='ipsHr ipsSpacer_both ipsResponsive_showPhone ipsResponsive_block'>\n\t\t\t<\/div>\n\t\t\t<div class='ipsGrid_span6'>\n\t\t\t\t\nCONTENT;\n\nif ( isset( $elements['']['stream_follow'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<h3 class='ipsType_reset ipsType_large cStreamForm_title'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_follow', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t<ul class='ipsSideMenu_list ipsSideMenu_withRadios cStreamForm_list ipsType_normal ipsSpacer_top ipsSpacer_half' data-ipsSideMenu data-ipsSideMenu-type='radio' data-ipsSideMenu-responsive='false' data-filterType='follow'>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $elements['']['stream_follow']->options['options'] as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"streams\", \"core\" )->filterFormRadio( $k, $v, 'stream_follow', $elements['']['stream_follow']->value, $elements['']['stream_follow']->required, $elements['']['stream_follow']->options['options'], $elements['']['stream_follow']->options['disabled'], ( $k == 'followed' ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $k == 'followed' ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<a class='ipsPos_right ipsType_blendLinks ipsType_noUnderline cStreamForm_menu' data-ipsTooltip title='' id='elMenu_followOptions' data-ipsMenu data-ipsMenu-activeClass='cStreamForm_menuActive' data-ipsMenu-closeOnClick='false' data-ipsMenu-appendTo='#elStreamFilterForm'>\n\t\t\t\t\t\t\t\t\t\t<i class='fa fa-cog ipsType_large'><\/i>\n\t\t\t\t\t\t\t\t\t\t<i class='fa fa-caret-down'><\/i>\n\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\n\t\t\t\t\t<div id='elMenu_followOptions_menu' class='ipsMenu ipsMenu_wide ipsPad ipsHide'>\n\t\t\t\t\t\t<ul class='ipsSideMenu_list ipsSideMenu_withChecks cStreamForm_list ipsType_normal ipsSpacer_top ipsSpacer_half' data-ipsSideMenu data-ipsSideMenu-type='check' data-ipsSideMenu-responsive='false' data-filterType='type'>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $elements['']['stream_followed_types']->options['options'] as $type => $lang ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href='#' class='ipsSideMenu_item \nCONTENT;\n\nif ( $elements['']['stream_followed_types']->value !== 0 && in_array( $type, $elements['']['stream_followed_types']->value ) !== FALSE ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-ipsMenuValue='\nCONTENT;\n$return .= htmlspecialchars( $type, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t<input type='checkbox' name='stream_followed_types[\nCONTENT;\n$return .= htmlspecialchars( $type, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n]' value='1' \nCONTENT;\n\nif ( $elements['']['stream_followed_types']->value !== 0 && in_array( $type, $elements['']['stream_followed_types']->value ) !== FALSE ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n> \n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$val = \"{$lang}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<hr class='ipsHr ipsSpacer_both ipsSpacer_double ipsResponsive_hidePhone'>\n\t\t\t\t<hr class='ipsHr ipsSpacer_both ipsResponsive_showPhone ipsResponsive_block'>\n\t\t\t\t\nCONTENT;\n\nif ( isset( $elements['']['stream_date_type'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<h3 class='ipsType_reset ipsType_large cStreamForm_title'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_date_type', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t<ul class='ipsSideMenu_list ipsSideMenu_withRadios cStreamForm_list ipsType_normal ipsSpacer_top ipsSpacer_half' data-ipsSideMenu data-ipsSideMenu-type='radio' data-ipsSideMenu-responsive='false' data-filterType='date'>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $elements['']['stream_date_type']->options['options'] as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"streams\", \"core\" )->filterFormRadio( $k, $v, 'stream_date_type', $elements['']['stream_date_type']->value, $elements['']['stream_date_type']->required, $elements['']['stream_date_type']->options['options'], $elements['']['stream_date_type']->options['disabled'] );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $elements['']['stream_date_relative_days'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class='ipsSpacer_top ipsSpacer_half cStreamForm_dates \nCONTENT;\n\nif ( $elements['']['stream_date_type']->value !== 'relative' ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-role=\"dateRelativeForm\">\n\t\t\t\t\t\t\t\t<h4 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_date_relative_days_prefix', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\t\t\t\t{$elements['']['stream_date_relative_days']->html()}\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'days', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $elements['']['stream_date_relative_days']->error ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t<span class=\"ipsType_warning ipsType_small\">\nCONTENT;\n\n$val = \"{$elements['']['stream_date_relative_days']->error}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $elements['']['stream_date_range'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class='ipsSpacer_top ipsSpacer_half cStreamForm_dates \nCONTENT;\n\nif ( $elements['']['stream_date_type']->value !== 'custom' ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-role=\"dateForm\">\n\t\t\t\t\t\t\t\t<div class=\"ipsGrid ipsGrid_collapsePhone\">\n\t\t\t\t\t\t\t\t\t<div class='ipsGrid_span6'>\n\t\t\t\t\t\t\t\t\t\t<h4 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'start', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\t\t\t\t\t\t{$elements['']['stream_date_range']->start->html()}\t\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t<div class='ipsGrid_span6'>\n\t\t\t\t\t\t\t\t\t\t<h4 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'end', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\t\t\t\t\t\t{$elements['']['stream_date_range']->end->html()}\t\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $elements['']['stream_date_range']->error ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<span class=\"ipsType_warning ipsType_small\">\nCONTENT;\n\n$val = \"{$elements['']['stream_date_range']->error}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction filterFormContentType( $elements, $key, $type, $checked=FALSE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( isset( $elements['stream_containers_' . $key ] ) ):\n$return .= <<<CONTENT\n\n\t<div class='ipsMenu ipsMenu_wide ipsPad ipsHide' id='elMenu_\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_menu'>\n\t\t<div data-contentType='\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t<h4 class='ipsType_reset ipsType_sectionHead ipsSpacer_bottom ipsClearfix'>\n\t\t\t\t<span class='ipsBadge ipsBadge_icon ipsBadge_new'><i class='fa fa-\nCONTENT;\n\n$return .= htmlspecialchars( $type::$icon, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><\/i><\/span>\n\t\t\t\t&nbsp;\nCONTENT;\n\n$val = \"{$key}_pl\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t<\/h4>\n\n\t\t\t\nCONTENT;\n\nif ( isset( $elements['stream_containers_' . $key ] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div class='ipsFieldRow ipsFieldRow_fullWidth'>\n\t\t\t\t\t<label class='ipsFieldRow_title'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_narrow_by_container', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/label>\n\t\t\t\t\t<div class='ipsFieldRow_content ipsSpacer_top ipsSpacer_half'>\n\t\t\t\t\t\t{$elements['stream_containers_' . $key ]->html()}\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction filterFormRadio( $k, $v, $name, $value, $required, $options, $disabled=FALSE, $hasOptions=FALSE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<a href='#' class='ipsSideMenu_item \nCONTENT;\n\nif ( $hasOptions ):\n$return .= <<<CONTENT\ncStream_withOptions\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( (string) $value == (string) $k or ( isset( $userSuppliedInput ) and !in_array( $value, array_keys( $options ) ) and $k == $userSuppliedInput ) ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-ipsMenuValue='\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t<input type=\"radio\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nif ( (string) $value == (string) $k or ( isset( $userSuppliedInput ) and !in_array( $value, array_keys( $options ) ) and $k == $userSuppliedInput ) ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( $disabled === TRUE or ( is_array( $disabled ) and in_array( $k, $disabled ) ) ):\n$return .= <<<CONTENT\ndisabled\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n id=\"elRadio_\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t<label for='elRadio_\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' id='elField_\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_label'>\nCONTENT;\n\n$val = \"{$v}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/label>\n<\/a>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction filterUpdateForm( $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $class='', $attributes=array(), $sidebar, $form=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='ipsAreaBackground ipsPad' data-controller='core.front.streams.form'>\n\t<form accept-charset='utf-8' class=\"ipsForm ipsForm_vertical\" action=\"\nCONTENT;\n$return .= htmlspecialchars( $action, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" method=\"post\" \nCONTENT;\n\nif ( $uploadField ):\n$return .= <<<CONTENT\nenctype=\"multipart\/form-data\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nforeach ( $attributes as $k => $v ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n data-ipsForm id='elFilterForm'>\n\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_submitted\" value=\"1\">\n\t\t\nCONTENT;\n\nforeach ( $hiddenValues as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $uploadField ):\n$return .= <<<CONTENT\n\n\t\t\t<input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $uploadField, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t<input type=\"hidden\" name=\"plupload\" value=\"\nCONTENT;\n\n$return .= htmlspecialchars( md5( uniqid() ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div class='ipsAreaBackground_reset ipsPad ipsSpacer_bottom' id='elStreamFilterForm'>\t\t\t\n\t\t\t<h2 class='ipsType_sectionHead'>\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_form_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t&nbsp;&nbsp;<a href='\nCONTENT;\n$return .= htmlspecialchars( $action->setQueryString( 'do', 'delete' ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsType_negative ipsType_normal ipsResponsive_noFloat' data-action='removeStream'><i class='fa fa-trash'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_remove', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/h2>\n\t\t\t<ul class='ipsList_inline ipsPos_right ipsResponsive_noFloat'>\n\t\t\t\t\nCONTENT;\n\nif ( isset( $hiddenValues['__custom_stream'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href='#elStreamSortEdit_menu' class='ipsButton ipsButton_light ipsButton_verySmall' id='elStreamSortEdit' data-ipsMenu data-ipsMenu-selectable='radio' data-ipsMenu-appendTo='#elStreamFilterForm' data-ipsMenu-closeOnClick='false'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_sorting', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<li>\n\t\t\t\t\t<a href='#elStreamSortEdit_menu' class='ipsButton ipsButton_light ipsButton_verySmall' id='elStreamTitleEdit' data-ipsMenu data-ipsMenu-appendTo='#elStreamFilterForm' data-ipsMenu-closeOnClick='false'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_rename', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\n\t\t\t\nCONTENT;\n\nif ( isset( $hiddenValues['__custom_stream'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<ul class='ipsMenu ipsMenu_selectable ipsMenu_auto ipsHide' id='elStreamSortEdit_menu'>\n\t\t\t\t\t<li class='ipsMenu_item \nCONTENT;\n\nif ( $elements['']['stream_sort']->value == 'newest' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t<a href='#'>\n\t\t\t\t\t\t\t<input type=\"radio\" name=\"stream_sort\" value=\"newest\" \nCONTENT;\n\nif ( (string) $elements['']['stream_sort']->value == 'newest' ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n id=\"elRadio_stream_sort_newest\">\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_sort_newest', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li class='ipsMenu_item \nCONTENT;\n\nif ( $elements['']['stream_sort']->value == 'oldest' ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t<a href='#'>\n\t\t\t\t\t\t\t<input type=\"radio\" name=\"stream_sort\" value=\"oldest\" \nCONTENT;\n\nif ( (string) $elements['']['stream_sort']->value == 'oldest' ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n id=\"elRadio_stream_sort_oldest\">\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_sort_oldest', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t<\/ul>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t<div class='ipsMenu ipsMenu_wide ipsPad ipsHide' id='elStreamTitleEdit_menu'>\n\t\t\t\t<input type='text' class='ipsField_fullWidth' name='stream_title' value='\nCONTENT;\n$return .= htmlspecialchars( $elements['']['stream_title']->value, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' placeholder='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\n\t\t\t<\/div>\n\t\t\t<hr class='ipsHr'>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"streams\", \\IPS\\Request::i()->app )->filterForm( $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $class, $attributes, $sidebar, $form );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\t<div id='elSaveNewStream_menu' class='ipsMenu ipsMenu_wide ipsHide ipsPad'>\n\t\t\t<ul class='ipsForm ipsForm_horizontal'>\n\t\t\t\t<li class='ipsFieldRow'>\n\t\t\t\t\t<input type='text' name='stream_new_title' value='' placeholder='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' class='ipsField_fullWidth ipsField_primary'>\n\t\t\t\t<\/li>\n\t\t\t\t<li class='ipsFieldRow'>\n\t\t\t\t\t<button type='submit' data-action='newStream' class='ipsButton ipsButton_primary ipsButton_medium ipsButton_fullWidth'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_new_stream', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\t<ul class=\"ipsToolList ipsToolList_horizontal ipsClearfix\">\n\t\t\t\nCONTENT;\n\nif ( isset( $hiddenValues['__custom_stream'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class='ipsPos_right'><button type='submit' class='ipsButton ipsButton_primary ipsButton_medium ipsButton_fullWidth' data-action='updateSaveStream'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_button_save_update', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button><\/li>\n\t\t\t\t<li class='ipsPos_right'><button type='submit' name='updateOnly' value='1' class='ipsButton ipsButton_veryLight ipsButton_medium ipsButton_fullWidth' data-action='updateStream'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_button_update', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button><\/li>\n\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t<li class='ipsPos_right'><button type='submit' name='updateOnly' value='1' class='ipsButton ipsButton_primary ipsButton_medium ipsButton_fullWidth' data-action='updateStream'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_button_update', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button><\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsPos_right ipsType_center'><button type='button' class='ipsButton ipsButton_link ipsButton_medium' data-action='cancelEditing'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_button_cancel', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button><\/li>\n\t\t\t<li class='ipsResponsive_showPhone ipsResponsive_block'><hr class='ipsHr'><\/li>\n\t\t\t<li class='ipsPos_left ipsJS_show'>\n\t\t\t\t<button type='button' class='ipsButton ipsButton_veryLight ipsButton_medium ipsButton_fullWidth' data-ipsMenu data-ipsMenu-closeOnClick='false' data-ipsMenu-appendTo='#elFilterForm' data-action='saveNewStream' id='elSaveNewStream'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_button_save', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t<\/form>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction stream( $stream, $results, $autoUpdate, $showTimeline=FALSE, $baseUrl, $sort='date', $view='expanded' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div data-controller='core.front.streams.activity' \nCONTENT;\n\nif ( !$autoUpdate ):\n$return .= <<<CONTENT\ndata-view='\nCONTENT;\n$return .= htmlspecialchars( $view, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( $autoUpdate && \\IPS\\Settings::i()->auto_polling_enabled ):\n$return .= <<<CONTENT\ndata-autoPoll\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( isset( \\IPS\\Request::i()->id ) ):\n$return .= <<<CONTENT\ndata-streamID='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Request::i()->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t<div class='ipsAreaBackground_light ipsPad'>\n\t\t<ul class=\"ipsButtonRow ipsPos_right ipsClearfix\">\n\t\t\t<li>\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $stream->url()->setQueryString( 'view', 'condensed'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-action='switchView' data-view='condensed' data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_condensed', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" class=\"\nCONTENT;\n\nif ( $view == 'condensed' ):\n$return .= <<<CONTENT\nipsButtonRow_active\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\"><i class=\"fa fa-list\"><\/i><\/a>\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $stream->url()->setQueryString( 'view', 'expanded'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-action='switchView' data-view='expanded' data-ipsTooltip title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_expanded', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" class=\"\nCONTENT;\n\nif ( $view == 'expanded' ):\n$return .= <<<CONTENT\nipsButtonRow_active\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\"><i class=\"fa fa-square\"><\/i><\/a>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t\t\nCONTENT;\n\nif ( $autoUpdate && \\IPS\\Settings::i()->auto_polling_enabled ):\n$return .= <<<CONTENT\n<p class='ipsType_light ipsPos_right ipsType_normal ipsType_reset ipsJS_show ipsResponsive_hidePhone' data-role='updateMessage'><i class='fa fa-refresh'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_auto_updates', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n &nbsp;&nbsp;<\/p>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<ol class='ipsStream \nCONTENT;\n\nif ( $showTimeline !== FALSE && count( $results ) ):\n$return .= <<<CONTENT\nipsStream_withTimeline\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n ipsList_reset' data-role='streamContent'>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"streams\", \"core\" )->streamItems( $results, $showTimeline, $sort, $view );\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsType_center ipsJS_show \nCONTENT;\n\nif ( !count( $results ) ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-role=\"loadMoreContainer\">\n\t\t\t\t<a href='#' class='ipsButton ipsButton_light ipsButton_small' data-action='loadMore'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'load_more_activity', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t<\/ol>\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction streamItems( $results, $showTimeSeparators=FALSE, $sort='date', $view='expanded' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\n$currentSeparator = NULL;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( count( $results ) ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nforeach ( $results as $result ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $showTimeSeparators ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( $currentSeparator != 'earlier' ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\n$separator = $result->streamSeparator( $sort == 'date' );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $currentSeparator != $separator ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsStreamItem_time' data-timeType='\nCONTENT;\n$return .= htmlspecialchars( $separator, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$val = \"{$separator}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\t\nCONTENT;\n\n$currentSeparator = $separator;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t{$result->html( $view, $sort != 'date' )}\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<li class='ipsType_center ipsPad'>\n\t\t<p class='ipsType_reset ipsType_light ipsType_normal'>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_no_results', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t<\/p>\n\t<\/li>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction streamWrapper( $stream, $html, $hasForm, $rssLink=NULL, $canCopy ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<section data-controller='core.front.streams.main' data-streamID='\nCONTENT;\n\nif ( isset( \\IPS\\Request::i()->id ) ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Request::i()->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nall\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\t\n\t<div class=\"ipsPageHeader ipsClearfix ipsSpacer_bottom\">\n\t\t<h1 class='ipsType_pageTitle' data-role='streamTitle'>\n\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $stream->_title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t<a data-action=\"toggleStreamDefault\" data-change=\"1\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $stream->url()->setQueryString('default', 1), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_this_isnt_default', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' class='ipsBadge ipsBadge_icon ipsBadge_small ipsType_middle ipsBadge_neutral ipsFaded ipsFaded_more \nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->defaultStream === $stream->_id ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'><i class='fa fa-check'><\/i><\/a>\n\t\t\t\t<a data-action=\"toggleStreamDefault\" data-change=\"0\" href=\"\nCONTENT;\n$return .= htmlspecialchars( $stream->url()->setQueryString('default', 0), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_this_is_default', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' class='ipsBadge ipsBadge_icon ipsBadge_small ipsType_middle ipsBadge_positive \nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->defaultStream !== $stream->_id ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'><i class='fa fa-check'><\/i><\/a>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/h1>\n\n\t\t\nCONTENT;\n\nif ( $rssLink || ( $stream->member && $stream->member == \\IPS\\Member::loggedIn()->member_id ) ):\n$return .= <<<CONTENT\n\n\t\t\t<ul class=\"ipsList_inline ipsPos_right ipsType_blendLinks ipsResponsive_hidePhone\">\n\t\t\t\t\nCONTENT;\n\nif ( $rssLink ):\n$return .= <<<CONTENT\n\t\n\t\t\t\t\t<li><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $rssLink, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"><i class=\"fa fa-rss\"><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'rss', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $stream->member && $stream->member == \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $stream->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_share_desc', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsMenu data-ipsTooltip id='elStreamShare'><i class='fa fa-share-alt'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_share', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<div class='ipsMenu ipsMenu_wide ipsPad ipsHide' id='elStreamShare_menu'>\n\t\t\t\t\t\t\t<h2 class='ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'share_stream_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t\t<hr class='ipsHr'>\n\t\t\t\t\t\t\t<p class='ipsType_medium'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'share_stream_info', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t<input type='text' value='\nCONTENT;\n$return .= htmlspecialchars( $stream->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsField_fullWidth'>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\nCONTENT;\n\nif ( $hasForm ):\n$return .= <<<CONTENT\n\n\t\t\t<p class='ipsType_reset ipsType_normal ipsSpacer_bottom ipsCursor_pointer' data-role='streamOverview'>\n\t\t\t\t<span data-role='streamBlurb'>\nCONTENT;\n$return .= htmlspecialchars( $stream->blurb(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span> <a href='#' data-streamID=\"\nCONTENT;\n$return .= htmlspecialchars( $stream->_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-action='editStream'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_edit_feed', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t<\/p>\n\t\t\n\t\t\t<div data-role='filterForm' class='ipsJS_hide ipsSpacer_top'>\n\t\t\t\t<div data-role=\"filterFormLoading\" class=\"cStreamForm_loading ipsAreaBackground ipsPad ipsHide\">\n\t\t\t\t\t<div class=\"ipsAreaBackground_reset\">\n\t\t\t\t\t\t<div class=\"ipsLoading\"><\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nelseif ( $canCopy ):\n$return .= <<<CONTENT\n\n\t\t\t<p class='ipsType_reset ipsType_normal ipsSpacer_bottom ipsCursor_pointer' data-role='streamOverview'>\n\t\t\t\t<span data-role='streamBlurb'>\nCONTENT;\n$return .= htmlspecialchars( $stream->blurb(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<\/p>\n\t\t\t\nCONTENT;\n\n$owner = \\IPS\\Member::load( $stream->member );\n$return .= <<<CONTENT\n\n\n\t\t\t<div class='ipsAreaBackground ipsPad ipsPhotoPanel ipsPhotoPanel_mini ipsClearfix'>\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $owner, 'mini' );\n$return .= <<<CONTENT\n\n\t\t\t\t<div>\n\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $stream->url()->setQueryString('do', 'copy')->csrf(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_primary ipsButton_large ipsPos_right ipsResponsive_noFloat'><i class='fa fa-plus'><\/i> &nbsp;\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_copy_feed', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/i><\/a>\n\t\t\t\t\t<p class='ipsType_reset ipsType_normal'>\n\t\t\t\t\t\t<strong>\nCONTENT;\n\n$sprintf = array($owner->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_copy_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/strong><br>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_copy_desc', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/p>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n\t\n\t<div data-role='streamBody'>\n\t\t{$html}\n\t<\/div>\n\n\t\nCONTENT;\n\nif ( $rssLink || ( $stream->member && $stream->member == \\IPS\\Member::loggedIn()->member_id ) ):\n$return .= <<<CONTENT\n\n\t\t<ul class=\"ipsList_inline ipsType_blendLinks ipsSpacer_both ipsType_center ipsResponsive_showPhone ipsResponsive_block\">\n\t\t\t\nCONTENT;\n\nif ( $rssLink ):\n$return .= <<<CONTENT\n\t\n\t\t\t\t<li><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $rssLink, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"><i class=\"fa fa-rss\"><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'rss', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( $stream->member && $stream->member == \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li>\n\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $stream->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_share_desc', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsMenu data-ipsTooltip id='elStreamShare'><i class='fa fa-share-alt'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stream_share', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<div class='ipsMenu ipsMenu_wide ipsPad ipsHide' id='elStreamShare_menu'>\n\t\t\t\t\t\t<h2 class='ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'share_stream_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t<hr class='ipsHr'>\n\t\t\t\t\t\t<p class='ipsType_medium'>\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'share_stream_info', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t<input type='text' value='\nCONTENT;\n$return .= htmlspecialchars( $stream->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsField_fullWidth'>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/section>\nCONTENT;\n\n\t\treturn $return;\n}}"
VALUE;
